<%- include("../../views/partials/user/header")%>

    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="index.html"><img src="assets/imgs/theme/icons/buddylogo1.png" alt="logo"></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for itemsâ€¦">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <div class="main-categori-wrap mobile-header-border">
                        <a class="categori-button-active-2" href="#">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                  
                    </div>
                   
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                    href="/">Home</a>
                               
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                    href="/shop">shop</a>
                                
                            </li>
                            
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a
                                    href="blog-category-fullwidth.html">About</a>
                              
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Blogs</a>
                              
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Contacts</a>
                              
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">German</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a href="page-contact.html"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="/signup"> Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="/login">Log In  </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+01) - 2345 - 6789 </a>
                    </div>
                </div>
                <div class="mobile-social-icon">
                    <h5 class="mb-15 text-grey-4">Follow Us</h5>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                </div>
            </div>
        </div>
    </div>
    <main class="main">
        <section class="home-slider position-relative pt-50">
            <div class="hero-slider-1 dot-style-1 dot-style-1-position-1">
                <div class="single-hero-slider single-animation-wrap">
                    <div class="container">
                        <div class="row align-items-center slider-animated-1">
                            <div class="col-lg-5 col-md-6">
                                <div class="hero-slider-content-2">
                                    <h4 class="animated">Trade-in offer</h4>
                                    <h2 class="animated fw-900">Supper value deals</h2>
                                    <h1 class="animated fw-900 text-brand">On all products</h1>
                                    <p class="animated">Save more with coupons & up to 70% off</p>
                                    <a class="animated btn btn-brush btn-brush-3" href="shop-product-right.html"> Shop
                                        Now </a>
                                </div>
                            </div>
                            <div class="col-lg-7 col-md-6">
                                <div class="single-slider-img single-slider-img-1">
                                    <img class="animated slider-1-1" src="assets/imgs/slider/slider-1.png" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="single-hero-slider single-animation-wrap">
                 <img class="animated slider-1-2" src="assets/imgs/slider/slider-2.png" alt="">
                   
                </div>
                <div class="single-hero-slider single-animation-wrap">
                    
                    <img class="animated slider-1-3" src="assets/imgs/slider/slider-2.png" alt="">
                  
                </div>
            </div>
            <div class="slider-arrow hero-slider-1-arrow"></div>
        </section>
       
        <section class="product-tabs section-padding position-relative wow fadeIn animated">
            <div class="bg-square"></div>
            <div class="container">
                <div class="tab-header">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="nav-tab-one" data-bs-toggle="tab"
                                data-bs-target="#tab-one" type="button" role="tab" aria-controls="tab-one"
                                aria-selected="true">Featured</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nav-tab-two" data-bs-toggle="tab" data-bs-target="#tab-two"
                                type="button" role="tab" aria-controls="tab-two" aria-selected="false">Popular</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three"
                                type="button" role="tab" aria-controls="tab-three" aria-selected="false">New
                                added</button>
                        </li>
                    </ul>
                    <a href="#" class="view-more d-none d-md-flex">View More<i
                            class="fi-rs-angle-double-small-right"></i></a>
                </div>
                <!--End nav-tabs-->
                <div class="tab-content wow fadeIn animated" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                        <div class="row product-grid-4">
                            
                                <% for (let i = 0; i < products.length; i++) { %>
                                    <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                                        <div class="product-cart-wrap mb-30">
                                            <div class="product-img-action-wrap">
                                                <div class="product-img product-img-zoom">
                                                    <a href="/productDetails?id=<%= products[i]._id %>">
                                                        <img class="default-img"
                                                            src="/assets/login/<%= products[i].productImages && products[i].productImages[0] %>"
                                                            alt="<%= products[i].productName || 'Product Image' %>">
                                                    </a>
                                                </div>
                                                <div class="product-action-1">
                                                    <a aria-label="Quick view" class="action-btn hover-up" data-bs-toggle="modal" 
                                                       data-bs-target="#quickViewModal" onclick="openQuickView('<%= products[i]._id %>')">
                                                        <i class="fi-rs-eye"></i>
                                                    </a>
                                                    <a aria-label="Add To Wishlist" class="action-btn hover-up" 
                                                       onclick="addToWishlist('<%= products[i]._id %>')">
                                                       <i class="fi-rs-heart"></i>
                                                    </a>
                                                </div>
                                                <div class="product-badges product-badges-position product-badges-mrg">
                                                    <span class="hot">Hot</span>
                                                </div>
                                            </div>
                                            <div class="product-content-wrap">
                                                <div class="product-category">
                                                    <a href="shop-grid-right.html">
                                                        <%= products[i].brand || 'Brand Name' %>
                                                    </a>
                                                </div>
                                                <h2>
                                                    <a href="/productDetails?id=<%= products[i]._id %>">
                                                        <%= products[i].productName || 'Product Name' %>
                                                    </a>
                                                </h2>
                                                <div class="rating-result">
                                                 
                                                
                                                        <span class="save-price font-md color3 ml-15">
                                                            <%= products[i].highestOffer %>% Off
                                                        </span>
                                                  
                                                </div>
                                                <div class="product-price">
                                                    
                                                    <% if (products[i].variants && products[i].variants.length > 0) { %>
                                                        <span>
                                                            â‚¹<%= Math.min(...products[i].variants.map(variant => variant.salePrice || 0)).toFixed() %>
                                                         </span>
                                                        <span class="old-price">
                                                            â‚¹<%= Math.min(...products[i].variants.map(variant => variant.regularPrice || 0)) %>
                                                        </span>
                                                    <% } %>
                                                </div>
                                                <div class="product-action-1 show">
                                                    <a aria-label="Add To Cart" class="action-btn hover-up" href="/cart/add?id=<%= products[i]._id %>">
                                                        <i class="fi-rs-shopping-bag-add"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <% } %>
                        </div>
               
                      </main>

    <%- include("../../views/partials/user/footer")%>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <script>


            function updatePrice(productId) {
                const variantDropdown = document.getElementById(`variant_${productId}`);
                const selectedPrice = variantDropdown.value;
                const priceElement = document.getElementById(`price_${productId}`);
                priceElement.textContent = `â‚¹${selectedPrice}`;
            }

            function addToWishlist(productId){

                $.ajax({
               url:'/addToWishlist',
               method:'POST',
               data:{productId:productId},
               success:(response)=>{
             if(response.status){
                swal.fire({
                    title:'Added to wishlist',
                    text:response.message,
                    icon:'success',
                    timer:2000
                })
             }else{
                swal.fire({
                    title:'already in wishlist',
                    text:response.message,
                    icon:'info',
                    timer:2000
                })
             }
               },
               error:(error)=>{
                swal.fire({
                title:'Error',
                text:'Error adding product to your wishlist',
                icon:'error',
                timer:2000
                })
                

               }
               
                })
            }


        </script>